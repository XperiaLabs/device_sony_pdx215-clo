From f5e466e095d504b1382eaf97126bee82ad564abe Mon Sep 17 00:00:00 2001
From: saku-bruh <saku-bruh@proton.me>
Date: Sun, 15 Sep 2024 00:08:58 +0000
Subject: [PATCH] sepolicy: Allow ignoring neverallows on user builds

---
 Android.mk | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/Android.mk b/Android.mk
index cf0d9b7..853ed66 100644
--- a/Android.mk
+++ b/Android.mk
@@ -82,8 +82,10 @@ endif
 NEVERALLOW_ARG :=
 ifeq ($(SELINUX_IGNORE_NEVERALLOWS),true)
 ifeq ($(TARGET_BUILD_VARIANT),user)
+ifneq ($(SELINUX_IGNORE_NEVERALLOWS_ON_USER),true)
 $(error SELINUX_IGNORE_NEVERALLOWS := true cannot be used in user builds)
 endif
+endif
 $(warning Be careful when using the SELINUX_IGNORE_NEVERALLOWS flag. \
           It does not work in user builds and using it will \
           not stop you from failing CTS.)
-- 
2.43.0

